#!/bin/bash

source $(dirname "${BASH_SOURCE}")/abash/abash.sh
sigint
set -e

# Get root privileges
sudo -v || exit 1

command_exists() {
  command -v $1 > /dev/null
}

bannerline "Updating pacman databases"
packer -Syy

bannerline "Updating packages"
packer -Syua --noconfirm
packer -Qdtq &> /dev/null && packer -Rsc $(packer -Qdtq) --noconfirm

bannerline "Cleaning pacman cache"
packer -Sc --noconfirm

if command_exists npm; then
  bannerline "Updating Node modules"
  npm -g update
fi

if command_exists gem; then
  bannerline "Updating Ruby gems"
  gem update
  gem cleanup
fi

