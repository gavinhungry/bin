#!/bin/bash

source $(dirname "${BASH_SOURCE}")/abash/abash.sh
sigint
set -e

# Get root privileges
sudo -v || exit 1

bannerline "Updating pacman databases"
packer -Syy

bannerline "Updating packages"
packer -Syua --noconfirm
packer -Qdtq &> /dev/null && packer -Rsc $(packer -Qdtq) --noconfirm

bannerline "Cleaning pacman cache"
packer -Sc --noconfirm

if [ -x /usr/local/bin/npm ]; then
  bannerline "Updating global Node modules"
  npm -g update
fi
