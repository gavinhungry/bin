#!/bin/bash

source $(dirname "${BASH_SOURCE}")/abash/abash.sh

NPM=${NPM:-/usr/local/bin/npm}
[ -x "$NPM" ] || die "cannot execute $NPM"

if arge global; then
  if [ $# -eq 2 -a "$2" == 'soft-update' ]; then
    for pkg in $(npm -g outdated --parseable --depth=0 | cut -d: -f2); do
      sudo $NPM -g install "$pkg"
    done
  else
    sudo $NPM "$@"
  fi
else
  $NPM "$@"
fi
